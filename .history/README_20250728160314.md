# 小红书数据爬虫浏览器插件

一个功能强大的小红书数据采集浏览器插件，支持自动滚动、数据提取、去重过滤和多格式导出。

## 功能特性

### 🚀 核心功能
- **智能数据采集**: 自动识别和提取小红书笔记数据
- **自动滚动**: 模拟真实用户行为的智能滚动
- **实时去重**: 基于URL和标题的重复数据过滤
- **多格式导出**: 支持CSV、JSON、Excel格式导出
- **状态监控**: 实时显示采集进度和统计信息

### 📊 数据字段
- 笔记标题
- 作者信息
- 点赞数
- 收藏数
- 评论数
- 笔记链接
- 封面图片
- 采集时间

### ⚙️ 高级设置
- **滚动控制**: 速度、间隔、最大次数可调
- **采集配置**: 最大数据量、保存间隔、重复过滤
- **导出选项**: 文件格式、字段选择、文件命名

## 安装方法

### 开发者模式安装
1. 下载或克隆本项目到本地
2. 打开Chrome浏览器，进入扩展程序页面 (`chrome://extensions/`)
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹
6. 插件安装完成

### 使用要求
- Chrome浏览器 88+ 或其他基于Chromium的浏览器
- 需要访问小红书网站的权限

## 使用指南

### 基本使用
1. 打开小红书网站 (xiaohongshu.com)
2. 点击浏览器工具栏中的插件图标
3. 在弹出的控制面板中点击"开始采集"
4. 插件将自动滚动页面并采集数据
5. 采集完成后可导出数据

### 控制面板说明
- **状态显示**: 显示当前采集状态（运行中/已暂停/已停止）
- **数据统计**: 实时显示已采集数据量和运行时间
- **控制按钮**: 开始/暂停/停止/设置
- **数据预览**: 显示最新采集的数据
- **导出功能**: 支持CSV、JSON、Excel格式导出

### 设置选项

#### 滚动设置
- **滚动速度**: 1-10级可调，影响滚动距离
- **滚动间隔**: 每次滚动的等待时间（毫秒）
- **最大滚动次数**: 防止无限滚动的保护机制
- **智能停止**: 检测到无新内容时自动停止
- **随机延迟**: 模拟真实用户行为
- **平滑滚动**: 使用动画效果滚动

#### 数据采集设置
- **自动开始**: 打开页面时自动开始采集
- **重复过滤**: 基于URL和标题去重
- **最大数据量**: 限制采集的最大数据条数
- **保存间隔**: 每采集N条数据保存一次
- **包含图片**: 是否采集封面图片URL
- **包含统计**: 是否采集点赞、收藏、评论数

## 技术架构

### 文件结构
```
xhs-plugin/
├── manifest.json          # 插件配置文件
├── popup/                 # 弹出界面
│   ├── popup.html
│   ├── popup.css
│   └── popup.js
├── content/               # 内容脚本
│   └── content.js
├── background/            # 后台脚本
│   └── background.js
├── utils/                 # 工具模块
│   ├── data-parser.js
│   ├── export-handler.js
│   ├── scroll-manager.js
│   ├── storage-manager.js
│   ├── message-handler.js
│   └── common-utils.js
└── README.md
```

### 核心组件

#### 1. 内容脚本 (content.js)
- 页面数据采集
- 滚动控制
- DOM解析
- 消息通信

#### 2. 弹出界面 (popup.js)
- 用户界面控制
- 状态显示
- 设置管理
- 数据预览

#### 3. 后台脚本 (background.js)
- 数据存储
- 文件导出
- 跨标签页通信
- 系统事件处理

#### 4. 工具模块
- **DataParserUtils**: 数据解析和提取
- **ExportHandlerUtils**: 多格式数据导出
- **ScrollManagerUtils**: 智能滚动管理
- **StorageManagerUtils**: 数据存储管理
- **MessageHandlerUtils**: 消息通信处理
- **CommonUtils**: 通用工具函数

## 数据格式

### 采集的数据结构
```json
{
  "id": "unique_id",
  "title": "笔记标题",
  "author": "作者昵称",
  "likes": 123,
  "collects": 45,
  "comments": 67,
  "url": "https://www.xiaohongshu.com/explore/...",
  "imageUrl": "https://sns-webpic-qc.xhscdn.com/...",
  "collectedAt": 1640995200000
}
```

### 导出格式

#### CSV格式
```csv
标题,作者,点赞数,收藏数,评论数,链接,采集时间
"笔记标题","作者昵称",123,45,67,"https://...","2023-01-01 12:00:00"
```

#### JSON格式
```json
{
  "data": [...],
  "meta": {
    "total": 100,
    "exportTime": "2023-01-01T12:00:00.000Z",
    "version": "1.0.0"
  }
}
```

## 注意事项

### 使用建议
1. **合理设置滚动速度**: 过快可能导致数据遗漏
2. **注意数据量限制**: 大量数据可能影响浏览器性能
3. **定期导出数据**: 避免数据丢失
4. **遵守网站规则**: 合理使用，避免对服务器造成压力

### 常见问题

#### Q: 插件无法启动？
A: 检查是否在小红书页面，确认插件权限已授予

#### Q: 数据采集不完整？
A: 调整滚动速度和间隔，确保页面完全加载

#### Q: 导出文件为空？
A: 确认已采集到数据，检查浏览器下载权限

#### Q: 插件运行缓慢？
A: 减少最大数据量设置，清理浏览器缓存

### 性能优化
- 使用合适的滚动间隔避免过度请求
- 定期清理存储数据释放内存
- 关闭不必要的功能选项
- 在数据量较大时分批导出

## 开发说明

### 开发环境
- Node.js 16+
- Chrome浏览器
- 代码编辑器

### 调试方法
1. 在Chrome扩展程序页面点击"检查视图"
2. 使用开发者工具调试
3. 查看控制台日志
4. 检查存储数据

### 自定义开发
- 修改数据解析规则: 编辑 `utils/data-parser.js`
- 添加新的导出格式: 扩展 `utils/export-handler.js`
- 调整界面样式: 修改 `popup/popup.css`
- 增加新功能: 在相应模块中添加代码

## 版本历史

### v1.0.0 (2024-01-01)
- 初始版本发布
- 基础数据采集功能
- 自动滚动控制
- 多格式数据导出
- 用户界面和设置

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目。

## 免责声明

本插件仅供学习和研究使用，请遵守相关网站的使用条款和法律法规。使用本插件产生的任何后果由使用者自行承担。

---

**注意**: 请合理使用本插件，尊重网站服务条款，避免对服务器造成不必要的负担。